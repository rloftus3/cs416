var margin = 50;
var width = 300;
var height = 300;

var x = d3.scaleLog([10,150],[0, width-(2*margin)]);
var y = d3.scaleLog([10,150],[height-(2*margin), 0]);

const data = await d3.csv(
  'https://flunky.github.io/cars2017.csv');

d3.select('svg').append('g')
  .attr('transform', 'translate('+margin+','+margin+')');

d3.select('g').selectAll('circle').data(data).enter().append('circle')
  .attr('cx', function(d) {return x(d.AverageCityMPG)})
  .attr('cy', function(d) {return y(d.AverageHighwayMPG)})
  .attr('r', function(d) {return d.EngineCylinders * 1 + 2});

d3.select('svg').append('g')
  .attr('transform', 'translate('+margin+','+margin+')')
  .call(d3.axisLeft(y)
    .tickValues([10, 20, 50, 100]).tickFormat(d3.format('~s')));

d3.select('svg').append('g')
  .attr('transform', 'translate('+margin+','+(height-margin)+')')
  .call(d3.axisBottom(x)
    .tickValues([10, 20, 50, 100]).tickFormat(d3.format('~s')));
